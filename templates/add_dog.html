{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Dogt</title>
    <!-- CSS or Bootstrap links -->
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="{% static 'styles/add_pet_css.css' %}">
</head>
<body>
    <div class="box rounded">
        <div class='h3'>Add Your Pet for Adoption</div>
        <div class="h4" id="subtitle">Please provide information about your pet</div>

        <form method="post" action = "{% url 'submitted_dog' %}" enctype="multipart/form-data" class="form">
            {% csrf_token %}<br><br>
            
            <div id="name">
                <div class="row">
                    <div class="col-6">
                        <label for="petName" class="form-label">Pet Name <span class="text-danger">*</span></label>
                    </div>
                    <div class="col-6">
                        <input type="text" id="petName" name="pet_name" placeholder="Pet Name" class="form-control" required>
                        <div id="nameFeedback" class="mb-2 text-danger"></div>
                    </div>
                </div>
            </div> <br>     

            <!--<div id="species">
                <div class="row">
                    <div class="col-6">
                        <label for="petSpecies" class="form-label">Pet Species <span class="text-danger">*</span></label>
                    </div>
                    <div class="col-6">
                        <input type="text" id="petSpecies" name = "pet_species"placeholder="Pet Species" class="form-control" required>
                        <div id="speciesFeedback" class="mb-2 text-danger"></div>
                    </div>
                </div>
            </div><br>-->

            <div id="gender">
                <div class="row">
                    <div class="col-6">
                        <label class="form-label">Pet Gender <span class="text-danger">*</span></label>
                    </div>
                    <div class="col-6">
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="pet_gender" id="male" value="male" required>
                            <label class="form-check-label" for="male">Male</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="pet_gender" id="female" value="female" required>
                            <label class="form-check-label" for="female">Female</label>
                        </div>
                    </div>
                </div>
            </div><br>

            <div id="breed">
                <div class="row">
                    <div class="col-6">
                        <label for="petBreed" class="form-label">Pet Breed</label>
                    </div>
                    <div class="col-6">
                        <select class="form-select" id="petBreed" name = "pet_breed">
                            <option value="" disabled selected>Select a breed</option>
                            <option value="breed1">German Shepherd</option>
                            <option value="breed2">Bulldog</option>
                            <option value="breed3">Labrador Retriever</option>
                        </select>
                    </div>
                </div>
            </div><br>

            <div id="age">
                <div class="row">
                    <div class="col-6">
                        <label for="petAge" class="form-label">Pet Age <span class="text-danger">*</span></label>
                    </div>
                    <div class="col-6">
                        <input type="number" id="petAge" name = "pet_age" class="form-control" required>
                        <div id="ageFeedback" class="mb-2 text-danger"></div>
                    </div>
                </div>
            </div><br>

            <div id="vaccinated">
                <div class="row">
                    <div class="col-6">
                        <label for="petVaccinated" class="form-label">Vaccinated <span class="text-danger">*</span></label>
                    </div>
                    <div class="col-6">
                        <select class="form-select" id="petVaccinated" name = "pet_vaccinated" required>
                            <option value="" disabled selected>Select an option</option>
                            <option value="yes">Yes</option>
                            <option value="no">No</option>
                        </select>
                    </div>
                </div>
            </div><br>

            <div id="city">
                <div class="row">
                    <div class="col-6">
                        <label for="petCity" class="form-label">Select City <span class="text-danger">*</span></label>
                    </div>
                    <div class="col-6">
                        <select class="form-select" id="petCity" name = "pet_city" required>
                            <option value="" disabled selected>Select a city</option>
                            <option value="city1">Pune</option>
                            <option value="city2">Mumbai</option>
                            <option value="city2">Nashik</option>
                            <option value="city2">Amravati</option>
                        </select>
                    </div>
                </div>
            </div><br>

            <div id="description">
                <div class="row">
                    <div class="col-6">
                        <label for="petDescription" class="form-label">Describe your pet</label>
                    </div>
                    <div class="col-6">
                        <textarea class="form-control" id="petDescription" name = "pet_description" rows="2" cols="20"></textarea>
                    </div>
                </div>
            </div><br>

            <div id="image">
                <div class="row">
                    <div class="col-6">
                        <label for="petImage" class="form-label">Pet Image <span class="text-danger">*</span></label>
                    </div>
                    <div class="col-6">
                        <input type="file" id="petImage" name = "pet_image" class="form-control" accept="image/*" required>
                        <!-- Add div for image feedback message -->
                        <div id="imageFeedback" class="mb-2 text-danger"></div>
                    </div>
                </div>
            </div><br>
            <div id="available">
                <div class="row">
                    <div class="col-6">
                        <label class="form-label">Available for Adoption <span class="text-danger">*</span></label>
                    </div>
                    <div class="col-6">
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="pet_available" id="yes" value="yes" required>
                            <label class="form-check-label" for="yes">Yes</label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="pet_available" id="no" value="no" required>
                            <label class="form-check-label" for="no">No</label>
                        </div>
                    </div>
                </div>
            </div><br>


            <div class="row">
                <div class="col-12" style="text-align: center;">
                    <button type="submit" class="btn btn-primary"  style="color:white;background-color: #3c0753b3;border: none;padding: 8px; border-radius: 5px;width: 150px;" onclick="validateAndSubmit()">Submit</button>
                </div>
            </div>
        </form>

        <script>
            function validateAndSubmit() {
                if (validateForm()) {
                    // If validation passes, submit the form
                    document.getElementById("petForm").submit();
                } else {
                    // If validation fails, do nothing
                    return false;
                }
            }
            
            function validateForm() {
                 // Prevent form submission by default
    
                // Reset previous feedback messages
                resetFeedback();
    
                var petName = document.getElementById("petName").value;
                var petAge = document.getElementById("petAge").value;
                var petVaccinated = document.getElementById("petVaccinated").value;
                var petCity = document.getElementById("petCity").value;
                var petDescription = document.getElementById("petDescription").value;
                var petImage = document.getElementById("petImage").value;
                var petAvail = document.getElementById("available").value;
                var petGen = document.getElementById("gender").value;
    
                // Check if required fields are empty
                if (petName === "" || petAge === "" || petVaccinated === "" || petCity === "" ||  petImage === "" || petAvail === "" || petGen === "") {
                    document.getElementById("nameFeedback").innerText = "Please fill in all required fields.";
                    return false;
                }
    
                // Additional Validations
                if (isNaN(petAge) || petAge <= 0) {
                    document.getElementById("ageFeedback").innerText = "Please enter a valid age.";
                    return false;
                }
    
                if (!validateName(petName)) {
                    document.getElementById("nameFeedback").innerText = "Please enter a valid name without special characters or numbers.";
                    return false;
                }
    
                if (!validateImageType(petImage)) {
                    document.getElementById("imageFeedback").innerText = "Please select a valid image file (jpg, jpeg, png, gif).";
                    return false;
                }
    
                // You can add more validations here
    
                // If all validations pass, you can submit the form
                return true;
            }
    
            function validateName(name) {
                // Regular expression to allow only letters
                var nameRegex = /^[a-zA-Z]+$/;
                return nameRegex.test(name);
            }
    
            function validateImageType(fileName) {
                // Valid image file extensions
                var allowedExtensions = /(\.jpg|\.jpeg|\.png|\.gif)$/i;
                return allowedExtensions.test(fileName);
            }
            function resetFeedback() {
                // Reset feedback messages
                document.getElementById("nameFeedback").innerText = "";
                document.getElementById("speciesFeedback").innerText = "";
                document.getElementById("ageFeedback").innerText = "";
                document.getElementById("imageFeedback").innerText = "";
            }
            function msg()
            {
                alert('{{n}}');
            }
        </script>
    
        <!-- Bootstrap JavaScript should be placed here -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    </body>
    </html>
    